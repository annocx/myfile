Android是一个开源的、基于Linux的软件栈，它是为各种设备和外形因素而创建的。下图显示了Android平台的主要组件。

![Figure 1. The Android software stack.](https://github.com/yifei8/myfile/blob/1c1a007269a014ace3d72afde279441db0b4bd60/Platform%20Architecture.png?raw=true)


# The Linux Kernel
Android平台的基础是Linux内核。例如， Android Runtime（ART）依赖于Linux内核来实现底层功能，例如线程和低级内存管理。

使用Linux内核允许Android利用关键安全功能，并允许设备制造商为众所周知的内核开发硬件驱动程序。

# Hardware Abstraction Layer (HAL)
硬件抽象层（HAL）提供标准接口，将设备硬件能力暴露给更高级的Java API框架。HAL由多个库模块组成，每个库模块为特定类型的硬件组件（如摄像头或蓝牙模块）实现接口。当框架API调用访问设备硬件时，Android系统将为该硬件组件加载库模块。


# Android Runtime
对于运行Android 5.0版（API级别21）或更高版本的设备，每个应用程序都在其自己的进程中运行，并且具有自己的Android运行时（ART）实例。ART是为了通过执行DEX文件在低内存设备上运行多个虚拟机而编写的，DEX文件是专为Android设计的字节码格式，专为最小内存占用而优化。构建工具链，例如Jack，将Java源代码编译成DEX字节码，可以在Android平台上运行。

ART的一些主要功能包括：

提前（AOT）和即时（JIT）编译
优化垃圾收集（GC）
在Android 9（API级别28）及更高版本上，将应用程序包的 Dalvik可执行格式（DEX）文件转换为更紧凑的机器代码。
更好的调试支持，包括专用的采样分析器，详细的诊断异常和崩溃报告，以及设置监视特定字段的观察点的能力
在Android 5.0版（API级别21）之前，Dalvik是Android运行时。如果您的应用程序在ART上运行良好，那么它也应该在Dalvik上运行，但 反过来可能不是这样。

Android还包括一组核心运行时库，它们提供Java编程语言的大部分功能，包括Java API框架使用的一些Java 8语言功能。

# 原生C / C ++库
许多核心Android系统组件和服务（例如ART和HAL）都是使用本机代码构建的，这些代码需要使用C和C ++编写的本机库。Android平台提供Java框架API，以向应用程序公开其中一些本机库的功能。例如，您可以通过Android框架的Java OpenGL API访问 OpenGL ES，以添加对应用程序中绘制和操作2D和3D图形的支持。

如果您正在开发需要C或C ++代码的应用程序，则可以使用 Android NDK直接从本机代码访问其中一些本机平台库。

# Java API框架
通过Java语言编写的API，您可以使用Android OS的整个功能集。这些API构成了通过简化核心，模块化系统组件和服务的重用来创建Android应用程序所需的构建块，其中包括：

丰富且可扩展的视图系统，您可以使用它来构建应用程序的UI，包括列表，网格，文本框，按钮，甚至可嵌入的Web浏览器
一个资源管理器，提供对非编码资源，如本地字符串，图形，和布局文件
一个通知管理器，使所有的应用程序在状态栏中显示自定义提醒
一个活动管理器管理应用程序的生命周期，并提供了一个通用的导航回栈
内容提供商，使应用程序能够访问其他应用程序（如“联系人”应用程序）中的数据，或共享自己的数据
开发人员可以完全访问Android系统应用程序使用的相同框架API。

# 系统应用
Android附带了一套用于电子邮件，短信，日历，互联网浏览，联系人等的核心应用程序。平台附带的应用程序在用户选择安装的应用程序中没有特殊状态。因此，第三方应用程序可以成为用户的默认Web浏览器，SMS Messenger，甚至是默认键盘（某些例外情况适用，例如系统的“设置”应用程序）。

系统应用程序既可以作为用户的应用程序，也可以提供开发人员可以从自己的应用程序访问的关键功能。例如，如果您的应用程序想要发送SMS消息，您不需要自己构建该功能 - 您可以调用已安装的任何SMS应用程序来向您指定的收件人发送消息。